"use strict";(self["webpackChunkcloud"]=self["webpackChunkcloud"]||[]).push([[14],{7582:function(o,e,a){a.r(e),a.d(e,{default:function(){return oo}});var l=a(3396),i=a(9242);const s=o=>((0,l.dD)("data-v-2a7e3668"),o=o(),(0,l.Cn)(),o),r={id:"cont"},n=s((()=>(0,l._)("h2",{class:"fw-bold"},"Registrar Usuario",-1))),t={class:"form-group"},d=s((()=>(0,l._)("label",{for:"email"},"Nombres:",-1))),c={class:"form-group"},u=s((()=>(0,l._)("label",{for:"email"},"Apellidos:",-1))),m={class:"card-body"},p={class:"mb-3"},f=s((()=>(0,l._)("label",{for:"password",class:"form-label"},"Contraseña",-1))),h={class:"form-group"},g=s((()=>(0,l._)("label",{for:"email"},"Dirección:",-1))),b={class:"form-group"},_=s((()=>(0,l._)("label",{for:"email"},"Ciudad:",-1))),w={class:"form-group"},y=s((()=>(0,l._)("label",{for:"email"},"Email:",-1))),v=s((()=>(0,l._)("hr",{class:"mb-4"},null,-1))),U=s((()=>(0,l._)("div",{class:"row"},[(0,l._)("label",{for:"categoria"},"Fecha de nacimiento:")],-1))),C={class:"col-md-12"},A={class:"form-group"},R=s((()=>(0,l._)("label",{for:"year"},"Año",-1))),V={class:"form-group"},x=s((()=>(0,l._)("label",{for:"gender"},"Género",-1))),j=s((()=>(0,l._)("option",{value:"Masculino"},"Masculino",-1))),q=s((()=>(0,l._)("option",{value:"Femenino"},"Femenino",-1))),D=[j,q],k=s((()=>(0,l._)("br",null,null,-1))),N={key:0,class:"row"},F={class:"form-group"},P=s((()=>(0,l._)("label",{for:"imageUpload",class:"colorTexto fw-bold"}," Seleccionar foto de perfil:",-1))),I=s((()=>(0,l._)("br",null,null,-1))),M={key:1,class:"row"},S={class:"form-group"},T=s((()=>(0,l._)("label",{for:"imageUpload",class:"colorTexto fw-bold"},"Seleccionar imagen del documento:",-1))),Z=s((()=>(0,l._)("button",{type:"submit",class:"btn btn-danger"},"Registrar",-1)));function H(o,e,a,s,j,q){return(0,l.wg)(),(0,l.iD)("div",r,[n,(0,l._)("form",{onSubmit:e[10]||(e[10]=(0,i.iM)((o=>q.registrarUsuario()),["prevent"]))},[(0,l._)("div",t,[d,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control bordeCaja",id:"email","onUpdate:modelValue":e[0]||(e[0]=o=>j.nombres=o),required:""},null,512),[[i.nr,j.nombres]])]),(0,l._)("div",c,[u,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control bordeCaja",id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>j.apellidos=o),required:""},null,512),[[i.nr,j.apellidos]])]),(0,l._)("div",m,[(0,l._)("div",p,[f,(0,l.wy)((0,l._)("input",{type:"password",class:"form-control bordeCaja",id:"password",name:"password","onUpdate:modelValue":e[2]||(e[2]=o=>j.password=o)},null,512),[[i.nr,j.password]])])]),(0,l._)("div",h,[g,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control bordeCaja",id:"email","onUpdate:modelValue":e[3]||(e[3]=o=>j.direccion=o),required:""},null,512),[[i.nr,j.direccion]])]),(0,l._)("div",b,[_,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control bordeCaja",id:"email","onUpdate:modelValue":e[4]||(e[4]=o=>j.ciudad=o),required:""},null,512),[[i.nr,j.ciudad]])]),(0,l._)("div",w,[y,(0,l.wy)((0,l._)("input",{type:"email",class:"form-control bordeCaja",id:"email","onUpdate:modelValue":e[5]||(e[5]=o=>j.email=o),required:""},null,512),[[i.nr,j.email]])]),v,U,(0,l._)("div",C,[(0,l._)("div",A,[R,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>j.fechaNacimiento=o),type:"datetime-local",class:"form-control bordeCaja",id:"year",name:"year",required:""},null,512),[[i.nr,j.fechaNacimiento]])])]),(0,l._)("div",V,[x,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>j.genero=o),class:"form-control bordeCaja",id:"gender",name:"gender",required:""},D,512),[[i.bM,j.genero]])]),k,j.email?((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("div",F,[P,(0,l._)("input",{type:"file",onChange:e[8]||(e[8]=(...o)=>q.fotoPerfil&&q.fotoPerfil(...o)),class:"form-control-file",id:"imageUpload"},null,32)])])):(0,l.kq)("",!0),I,j.email?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",S,[T,(0,l._)("input",{type:"file",onChange:e[9]||(e[9]=(...o)=>q.fotoDocumento&&q.fotoDocumento(...o)),class:"form-control-file",id:"imageUpload"},null,32)])])):(0,l.kq)("",!0),Z],32)])}var E=a(1076),G="https://aname-a05m.onrender.com/API/Aname/V1";const L=async o=>await Y(o),Y=async o=>E.Z.post(G+"/usuario",o).then((o=>o.data));var z="https://aname-a05m.onrender.com/API/Aname/V1";const B=async o=>(console.log(o),await J(o)),J=async o=>E.Z.post(z+"/usuario/email/enviarSimple",o).then((o=>o.data));var K="https://aname-a05m.onrender.com/API/Aname/V1";const O=async(o,e,a)=>await Q(o,e,a),Q=async(o,e,a)=>{const l=new FormData;return l.append("file",o),l.append("contenedor",e),l.append("email",a),E.Z.post(K+"/files",l,{headers:{"Content-Type":"multipart/form-data"}}).then((o=>o.data))};var W={data(){return{nombres:null,apellidos:null,direccion:null,ciudad:null,email:null,password:null,perfil:null,id:null,estado:null,genero:null,fechaNacimiento:null,foto:null,documento:null,fotoResponse:null,documentoResponse:null}},methods:{fotoPerfil(o){const e=o.target.files[0];console.log("Archivo seleccionado:",e),this.foto=e,this.cargaFoto()},fotoDocumento(o){const e=o.target.files[0];console.log("Archivo seleccionado:",e),this.documento=e,this.cargarArchivos()},async cargarArchivos(){this.documentoResponse=await O(this.documento,"doc-identidad",this.email)},async cargaFoto(){this.fotoResponse=await O(this.foto,"fotografia",this.email)},registrarUsuario(){const o={id:0,nombres:this.nombres,apellidos:this.apellidos,email:this.email,password:this.password,rol:"ATL",estado:!0,direccion:this.direccion,sexo:this.genero,fechaNacimiento:this.fechaNacimiento,ciudad:this.ciudad,documentoIdentidad:this.documentoResponse,fotografia:this.fotoResponse};L(o).then((o=>{try{if(console.log(o.status),410===o.status)alert("Ya existe un usuario con el email:"+this.email);else{const o={toUser:this.email,subject:"Registro Usuario",message:"Usuario registrado con éxito"};B(o),alert("Usuario registrado con éxito"),this.id=null,this.nombres=null,this.apellidos=null,this.email=null,this.password=null,this.perfil=null,this.estado=null,this.direccion=null,this.genero=null,this.fechaNacimiento=null,this.ciudad=null,this.foto=null,this.documento=null,this.fotoResponse=null,this.documentoResponse=null}}catch(e){alert("Ha ocurrido un error al procesar la respuesta del servidor"),console.log(e)}})).catch((o=>{alert("Ha ocurrido un error al guardar, prueba a cambiar el nombre de usuario"),console.log(o)}))}}},X=a(89);const $=(0,X.Z)(W,[["render",H],["__scopeId","data-v-2a7e3668"]]);var oo=$}}]);
//# sourceMappingURL=UsuarioRegistrar.e8b88f72.js.map